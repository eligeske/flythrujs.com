var flythru=function(){var t,n=($("#test_panel"),$("#speciman")),e=$("#reset"),i=[],a=!1,s={win:null},o={viewport:{h:800,w:900},zoom:1,pace:1e3},r=function(){n.css({height:o.viewport.h+"px",width:o.viewport.w+"px",transform:"scale("+o.zoom+")"}),o.zoom<1&&n.css({transform:"scale("+o.zoom+")"});var t=($("#right_cont").width()-n.width()*o.zoom)/2,e=($("#right_cont").height()-n.height()*o.zoom)/2;$("#browser_window").css({"padding-left":t>0?t:0,"padding-top":e>0?e:0})};$(window).resize(function(){r()});var d=$("#run_test").click(function(){c.start()});d.attr("disabled",!0),setTimeout(function(){d.removeAttr("disabled",!0)},1),e.click(function(){c.reset()});var c=function(){var t=0,n={start:function(){e.attr("disabled",!0);var a=function(){i[t]?(i[t-1]&&i[t-1].expand(!1),i[t].expand(!0),i[t].arrival(function(){t++,a(t)}),i[t].takeoff()):(n.stop(),d.text("Landed!"))};a()},stop:function(){e.removeAttr("disabled")},reset:function(){t=0;for(var n=0;n<i.length;n++)i[n].reset();d.text("Take Off").removeAttr("disabled")}};return n}(),l=function(){if(s.win=n[0].contentWindow?n[0].contentWindow:!1,s.win&&s.win.$?(t=n[0].contentWindow.$,s.html=n[0].contentWindow.$("html")):s.win&&s.win.document?(t=$,s.html=$(s.win.document).find("html")):s.html=!1,t){var e=function(t){var n=t.attr("ng-model");n&&s.win.angular&&s.win.angular.element(t).scope&&(s.win.angular.element(t).scope()[n]=t.val(),s.win.angular.element(t).scope().$apply())};t.fn.typeIn=function(n){return t(this).val(n).trigger("keydown").trigger("keyup").trigger("keypress").trigger("change"),e(t(this)),this}}},u=function(t){var n=this,e=[],i=0,a={},r=[];this.reset=function(){i=0,d.removeClass("passed").removeClass("failed"),l.find("div").removeClass("passed").removeClass("failed"),n.expand(!1)};var d=$("<div>",{"class":"group"}),c=$("<span>",{"class":"title",html:t}),l=$("<div>",{"class":"check-holder"});this.expand=function(t){t?d.addClass("open"):d.removeClass("open")},d.append(c,l),c.click(function(){n.expand(!$(this).parent().find(".check-holder").is(":visible"))}),$("#test_panel").append(d);var u=function(){if(e[i]){i++;var t=e[i-1];setTimeout(t,(ms=a[(i-1).toString()])?ms:o.pace)}else d.hasClass("failed")||(d.addClass("passed"),$.each(r,function(t,n){n()}))};this.flyby=function(){return n},this.addStop=function(t,i){var a=$("<div>",{html:"<span>"+t+"</span>","class":"check"});return l.append(a),e.push(function(){i(function(){a.addClass("passed"),u()},function(t){a.addClass("failed"),d.addClass("failed"),t&&alert(t)},s)}),n};var f=function(t,n,i){var a=$("<div>",{html:"<span>"+t+"</span>","class":"check"});l.append(a);var i=i,n=n;e.push(function(){var t=null,e=0,o=1e3,r=function(n){t=!1,a.addClass("failed"),d.addClass("failed"),n&&alert(n)},c=function(){return null!==t?void(t?u():r("Layover times up")):void setTimeout(function(){e+=o,n(function(){t=!0,a.addClass("passed")},r,s),e>i&&(t=!1),c()},1e3)};c()})};this.layover=function(t,i,s){return arguments.length>1?f(t,i,s):a[e.length.toString()]=t,n},this.takeoff=function(){u()},this.arrival=function(t){r.push(t)},this.stops=e},f={destination:function(t){var e=new u("Load web page");return i.push(e),e.addStop("Navigate to: "+t,function(e){d.attr("disabled",!0),d.text("boarding.."),n.load(function(){n.removeClass("faded"),setTimeout(function(){l(),a=!0,d.text("In Flight!"),e()},2e3)}),n.attr("src",t)}),f},addFlight:function(t){var n=new u(t);return i.push(n),n},getConfig:function(){return o},config:function(t){$.extend(o,t),r()},cargo:s,flights:i};return r(),f}();