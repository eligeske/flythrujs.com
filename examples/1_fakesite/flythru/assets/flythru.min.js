var flythru=function(){var n=($("#test_panel"),$("#speciman")),t=[],e=!1,a=$("#run_test").click(function(){s()});a.attr("disabled",!0),setTimeout(function(){a.removeAttr("disabled",!0)},1);var s=function(){var n=0,e=function(){t[n]&&(t[n].finished(function(){n++,e(n)}),t[n].run())};e()},i=function(){return n[0].contentWindow.$?n[0].contentWindow.$("html"):!1},o=function(n){var t=this,e=[],a=0,s={},o={ele:null};this.cache=o;var d=[],u=$("<div>",{"class":"group"}),c=$("<span>",{"class":"title",html:n}),l=$("<div>",{"class":"check-holder"});u.append(c,l),$("#test_panel").append(u);var r=function(){if(e[a]){a++;var n=e[a-1];(ms=s[(a-1).toString()])?(console.log("waiting "+ms),setTimeout(n,ms)):n()}else u.hasClass("failed")||(u.addClass("passed"),$.each(d,function(n,t){t()}))};this.skip=function(){return t},this.addStep=function(n,a){var s=n,d=$("<div>",{html:"<span>"+n+"</span>","class":"check"});return l.append(d),e.push(function(){a(function(){console.log(s+" passed!"),d.addClass("passed"),r()},function(){console.log(s+" failed!"),d.addClass("failed"),u.addClass("failed")},i(),o)}),t},this.waitFor=function(n,a,s){var d=$("<div>",{html:"<span>"+n+"</span>","class":"check"});l.append(d);var s=s,a=a;return e.push(function(){var n=null,t=0,e=1e3,c=function(){return null!==n?void(n&&r()):void setTimeout(function(){t+=e,a(function(){n=!0,d.addClass("passed")},function(){n=!1,d.addClass("failed"),u.addClass("failed")},i(),o),t>s&&(n=!1),c()},1e3)};c()}),t},this.wait=function(n){return s[e.length.toString()]=n,t},this.run=function(){r()},this.finished=function(n){d.push(n)}},d={navigate:function(s){var i=new o("Load web page");return t.push(i),i.addStep("Navigate to: "+s,function(t){a.attr("disabled",!0),a.text("loading.."),n.load(function(){n.removeClass("faded"),setTimeout(function(){e=!0,a.text("Run Test"),a.removeAttr("disabled"),t()},2e3)}),n.attr("src",s)}),d},addTest:function(n){var e=new o(n);return t.push(e),e},getDom:i,tests:t};return d}();